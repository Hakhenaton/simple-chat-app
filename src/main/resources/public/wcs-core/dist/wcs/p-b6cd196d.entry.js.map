{"version":3,"names":["comNavSubmenuCss","WCS_COM_NAV_CATEGORY","ComNavSubmenu","componentWillLoad","slottedCategoryItems","this","el","querySelectorAll","registerCloseHandlerForFocusOutEventOn","onWindowClickEvent","_","menuOpen","onSubmenuOpened","event","detail","menuElement","onEscapeKeyDown","_event","isEscapeKey","async","onClick","evt","stopPropagation","wcsSubmenuOpened","emit","handleMenuItemsKeyDown","isSpaceKey","isEnterKey","handleMenuItemsClick","handleMenuKeyDown","target","tagName","close","wcsClickOnFinalAction","wcsCategoryItemClickedHandler","render","h","Host","tabindex","screen","width","onKeyDown","class","label","tabIndex","panelTitle","panelDescription"],"sources":["./src/components/com-nav-submenu/com-nav-submenu.scss?tag=wcs-com-nav-submenu&encapsulation=shadow","./src/components/com-nav-submenu/com-nav-submenu.tsx"],"sourcesContent":["@import '../../style/focus-outline.scss';\n\n:host {\n    display: block;\n    padding-bottom: var(--wcs-padding);\n\n    .menu-button {\n        display: block;\n        font-weight: 500;\n        padding-left: calc(3 * var(--wcs-base-margin));\n    }\n\n    .arrow-icon {\n        display: none;\n    }\n\n    .arrow-container {\n        display: none;\n    }\n\n    .label {\n        text-transform: uppercase;\n        font-size: 16px;\n        cursor: unset;\n        font-weight: 500;\n        color: var(--wcs-gray);\n        text-decoration: none;\n    }\n\n    .drawer {\n        display: contents;\n    }\n\n    .drawer-container {\n        display: contents;\n    }\n    .drawer-description {\n        display: none;\n    }\n    .menu-items {\n        ::slotted(a):after {\n            font-family: icons;\n            padding-left: var(--wcs-base-margin);\n            font-size: 0.6rem;\n            content: \"\\f107\";\n            line-height: 1;\n            box-sizing: border-box;\n        }\n\n        ::slotted(a) {\n            user-select: none;\n            cursor: pointer;\n            text-decoration: none;\n            font-size: 16px;\n            color: var(--wcs-gray);\n            font-weight: 500;\n            display: block;\n            padding-top: calc(1.5 * var(--wcs-base-margin));\n            padding-bottom: calc(1.5 * var(--wcs-base-margin));\n            padding-left: calc(6 * var(--wcs-base-margin));\n        }\n\n        /**For mobile*/\n        ::slotted(a:focus-visible){\n            @include focus-outline(var(--wcs-primary), 2px, 0.1rem);\n        }\n\n        @supports not selector(::slotted(a:focus-visible)) {\n            ::slotted(a:focus-within) {\n                @include focus-outline(var(--wcs-primary), 2px, 0.1rem);\n            }\n        }\n    }\n}\n\n@media screen and (min-width: 576px) {\n    :host {\n        height: 100%;\n        padding-bottom: unset;\n\n        .menu-button {\n            display: flex;\n            align-items: center;\n            height: 100%;\n            cursor: pointer;\n            user-select: none;\n            font-weight: unset;\n            padding-left: unset;\n        }\n\n        .menu-button:focus-visible {\n            @include focus-outline(var(--wcs-primary), 2px, 0.1rem);\n        }\n\n        @supports not selector(.menu-button:focus-visible) {\n            @include focus-outline(var(--wcs-primary), 2px, 0.1rem);\n        }\n\n        .label {\n            text-transform: unset;\n            cursor: pointer;\n        }\n\n        .arrow-icon {\n            display: inline-block;\n            font-family: icons;\n            font-size: 0.6rem;\n            line-height: 1;\n            box-sizing: border-box;\n        }\n\n        .arrow-container {\n            display: unset;\n            margin-left: var(--wcs-base-margin);\n        }\n\n        .arrow-icon:not([data-open]) {\n            transform: rotate(90deg);\n        }\n\n        .arrow-icon[data-open] {\n            transform: rotate(-90deg);\n        }\n\n        .drawer {\n            display: none;\n            position: absolute;\n            top: 75px;\n            z-index: 8888;\n            left: 0;\n            width: 100%;\n            box-sizing: border-box;\n            padding: 50px;\n            background-color: var(--wcs-primary);\n            color: var(--wcs-white);\n        }\n\n        .drawer-content {\n            display: flex;\n            justify-content: space-between;\n            max-width: 62.5%;\n            flex: 1;\n\n            div:first-child {\n                flex: 0.8;\n            }\n\n            div {\n                max-width: 260px;\n            }\n        }\n\n        .menu-items {\n            padding: 0 80px 0 50px;\n            display: flex;\n            flex-direction: column;\n            align-items: flex-end;\n\n            ::slotted(*:not(:first-child)) {\n                margin-top: 24px;\n            }\n\n            ::slotted(a) {\n                color: var(--wcs-white);\n                font-weight: 400;\n                display: unset;\n                padding-top: unset;\n                padding-bottom: unset;\n                padding-left: unset;\n            }\n\n            ::slotted(a:focus-visible){\n                @include focus-outline(var(--wcs-white), 2px, 0.1rem);\n            }\n\n            @supports not selector(::slotted(a:focus-visible)) {\n                ::slotted(a:focus-within) {\n                    @include focus-outline(var(--wcs-white), 2px, 0.1rem);\n                }\n            }\n        }\n\n        .drawer-container {\n            display: flex;\n            max-width: var(--wcs-com-content-max-width);\n            margin: 0 auto;\n\n            h3 {\n                margin: 0 0 24px 0;\n                font-size: 1.5rem;\n                line-height: 1.25;\n                font-weight: 400;\n            }\n\n            p {\n                margin-top: 0;\n                margin-bottom: 1rem;\n                font-weight: 500;\n                font-size: 1rem;\n                line-height: 1.375;\n            }\n        }\n\n        .drawer[data-open] {\n            display: block;\n        }\n        .drawer-description {\n            display: block;\n        }\n    }\n}\n","import {\n    Component,\n    ComponentInterface,\n    h,\n    Host,\n    Listen,\n    Prop,\n    State,\n    Element,\n    Event,\n    EventEmitter, Method\n} from '@stencil/core';\nimport {MenuOpenedEventDetail} from '../com-nav/com-nav-interface';\nimport {isEnterKey, isEscapeKey, isSpaceKey} from \"../../utils/helpers\";\nimport {registerCloseHandlerForFocusOutEventOn} from \"../com-nav/com-nav-utils\";\n\n\nconst WCS_COM_NAV_CATEGORY = 'WCS-COM-NAV-CATEGORY';\n\n@Component({\n    tag: 'wcs-com-nav-submenu',\n    styleUrl: 'com-nav-submenu.scss',\n    shadow: true,\n})\nexport class ComNavSubmenu implements ComponentInterface {\n    @Element() private el!: HTMLWcsComNavSubmenuElement;\n    @Prop() label: string;\n    @Prop() panelTitle: string;\n    @Prop() panelDescription: string;\n    @State() private menuOpen: boolean = false;\n    @Event() wcsSubmenuOpened: EventEmitter<MenuOpenedEventDetail>;\n    /**\n     * Emitted when a user click on a final navigation action.\n     *\n     * Used by the com-nav component to close the mobile menu overlay when a user click on a final action.\n     */\n    @Event() wcsClickOnFinalAction: EventEmitter<void>;\n\n    componentWillLoad(): Promise<void> | void {\n        const slottedCategoryItems = this.el.querySelectorAll(':scope > wcs-com-nav-category:not([slot])');\n        registerCloseHandlerForFocusOutEventOn<HTMLWcsComNavCategoryElement>(slottedCategoryItems, WCS_COM_NAV_CATEGORY);\n    }\n\n    /**\n     * If the user clicks outside the menu, we close it\n     */\n    @Listen('click', {target: 'window'})\n    onWindowClickEvent(_: MouseEvent) {\n        if (this.menuOpen) this.menuOpen = false;\n    }\n\n    @Listen('wcsSubmenuOpened', {target: 'window'})\n    onSubmenuOpened(event: CustomEvent<MenuOpenedEventDetail>) {\n        // If the clicked menu is not this component, we close it\n        if (event.detail.menuElement !== this.el) {\n            this.menuOpen = false;\n        }\n    }\n\n    /**\n     * Close the menu when escape is pressed\n     * @param _event keydown event\n     */\n    @Listen('keydown', {target: 'window'})\n    onEscapeKeyDown(_event: KeyboardEvent) {\n        if (isEscapeKey(_event) && this.menuOpen) {\n            this.menuOpen = false;\n        }\n    }\n\n    /**\n     * Close the menu\n     */\n    @Method()\n    async close() {\n        this.menuOpen = false;\n    }\n\n    /**\n     * Opens the menu\n     */\n    @Method()\n    async open() {\n        this.menuOpen = true;\n    }\n\n    /**\n     * When the user clicks on the menu, we do not propagate the native event and we launch a custom event to manage\n     * the closing of the menu correctly\n     */\n    private onClick(evt: MouseEvent) {\n        evt.stopPropagation();\n        this.wcsSubmenuOpened.emit({menuElement: this.el})\n    }\n\n    /**\n     * Handle key down on menu items\n     * @param _event the keyboard event\n     * @private\n     */\n    private handleMenuItemsKeyDown(_event: KeyboardEvent) {\n        if ((isSpaceKey(_event)) || isEnterKey(_event)) {\n            this.handleMenuItemsClick(_event);\n        }\n    }\n\n    /**\n     * Open the menu if it is closed and closed the menu if it is already opened\n     * @param _event the keyboard event\n     * @private\n     */\n    private handleMenuKeyDown(_event: KeyboardEvent) {\n        if ((isSpaceKey(_event)) || isEnterKey(_event)) {\n            this.menuOpen = !this.menuOpen;\n        }\n    }\n\n    private handleMenuItemsClick(evt: UIEvent) {\n        if ((evt.target as HTMLElement).tagName === 'A') {\n            this.close();\n            this.wcsClickOnFinalAction.emit();\n        }\n    }\n\n    /**\n     * handle category item click to close the submenu\n     * @param _\n     * @private\n     */\n    @Listen('wcsCategoryItemClicked')\n    // @ts-ignore\n    private wcsCategoryItemClickedHandler(_: CustomEvent<UIEvent>) {\n        // If a category item is clicked, we close the submenu drawer;\n        this.close();\n    }\n\n\n    render(): any {\n        return (\n            <Host onClick={evt => this.onClick(evt)}>\n                <div tabindex={screen.width < 576 ? \"-1\" : \"0\"}\n                     onClick={_ => this.menuOpen = !this.menuOpen}\n                     onKeyDown={evt => this.handleMenuKeyDown(evt)}\n                     class=\"menu-button\">\n                    <span class=\"label\">{this.label}</span><span class=\"arrow-container\"><span\n                    class=\"arrow-icon\" data-open={this.menuOpen}>&#xf107;</span></span>\n                </div>\n                <div class=\"drawer\" data-open={this.menuOpen} tabIndex={-1}>\n                    <div class=\"drawer-container\">\n                        <div class=\"drawer-content\">\n                            <div class=\"drawer-description\">\n                                <h3>{this.panelTitle}</h3>\n                                <p>{this.panelDescription}</p>\n                            </div>\n                            <div class=\"menu-items\"\n                                 onClick={(evt) => this.handleMenuItemsClick(evt)}\n                                 onKeyDown={evt => this.handleMenuItemsKeyDown(evt)}>\n                                <slot/>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </Host>\n        );\n    }\n\n\n}\n"],"mappings":"sJAAA,MAAMA,EAAmB,yxGCiBzB,MAAMC,EAAuB,uB,MAOhBC,EAAa,M,sOAKe,K,CASrCC,oBACI,MAAMC,EAAuBC,KAAKC,GAAGC,iBAAiB,6CACtDC,EAAqEJ,EAAsBH,E,CAO/FQ,mBAAmBC,GACf,GAAIL,KAAKM,SAAUN,KAAKM,SAAW,K,CAIvCC,gBAAgBC,GAEZ,GAAIA,EAAMC,OAAOC,cAAgBV,KAAKC,GAAI,CACtCD,KAAKM,SAAW,K,EASxBK,gBAAgBC,GACZ,GAAIC,EAAYD,IAAWZ,KAAKM,SAAU,CACtCN,KAAKM,SAAW,K,EAQxBQ,cACId,KAAKM,SAAW,K,CAOpBQ,aACId,KAAKM,SAAW,I,CAOZS,QAAQC,GACZA,EAAIC,kBACJjB,KAAKkB,iBAAiBC,KAAK,CAACT,YAAaV,KAAKC,I,CAQ1CmB,uBAAuBR,GAC3B,GAAKS,EAAWT,IAAYU,EAAWV,GAAS,CAC5CZ,KAAKuB,qBAAqBX,E,EAS1BY,kBAAkBZ,GACtB,GAAKS,EAAWT,IAAYU,EAAWV,GAAS,CAC5CZ,KAAKM,UAAYN,KAAKM,Q,EAItBiB,qBAAqBP,GACzB,GAAKA,EAAIS,OAAuBC,UAAY,IAAK,CAC7C1B,KAAK2B,QACL3B,KAAK4B,sBAAsBT,M,EAW3BU,8BAA8BxB,GAElCL,KAAK2B,O,CAITG,SACI,OACIC,EAACC,EAAI,CAACjB,QAASC,GAAOhB,KAAKe,QAAQC,IAC/Be,EAAA,OAAKE,SAAUC,OAAOC,MAAQ,IAAM,KAAO,IACtCpB,QAASV,GAAKL,KAAKM,UAAYN,KAAKM,SACpC8B,UAAWpB,GAAOhB,KAAKwB,kBAAkBR,GACzCqB,MAAM,eACPN,EAAA,QAAMM,MAAM,SAASrC,KAAKsC,OAAaP,EAAA,QAAMM,MAAM,mBAAkBN,EAAA,QACrEM,MAAM,aAAY,YAAYrC,KAAKM,UAAQ,OAE/CyB,EAAA,OAAKM,MAAM,SAAQ,YAAYrC,KAAKM,SAAUiC,UAAW,GACrDR,EAAA,OAAKM,MAAM,oBACPN,EAAA,OAAKM,MAAM,kBACPN,EAAA,OAAKM,MAAM,sBACPN,EAAA,UAAK/B,KAAKwC,YACVT,EAAA,SAAI/B,KAAKyC,mBAEbV,EAAA,OAAKM,MAAM,aACNtB,QAAUC,GAAQhB,KAAKuB,qBAAqBP,GAC5CoB,UAAWpB,GAAOhB,KAAKoB,uBAAuBJ,IAC/Ce,EAAA,iB"}